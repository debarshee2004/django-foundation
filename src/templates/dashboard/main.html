{% extends "dashboard/bash.html" %} {% load static %} {% block head_title
%}Build your SaaS Now - {{ block.super }}{% endblock head_title %} {% block
content %}
<!-- Main Dashboard Content -->
<div class="p-6 space-y-6">
  <!-- Welcome Header -->
  <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">
          Welcome back, {{ user.first_name|default:user.username }}!
        </h1>
        <p class="text-gray-600 mt-2">
          Here's your account overview and quick actions
        </p>
      </div>
      <div class="text-right">
        <div class="text-sm text-gray-500">Account since</div>
        <div class="text-lg font-semibold">
          {{ user.date_joined|date:"M Y" }}
        </div>
        <div class="text-xs text-gray-400">{{ account_age_days }} days ago</div>
      </div>
    </div>
  </div>

  <!-- Account Status Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Email Verification Status -->
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          {% if email_verified %}
          <div
            class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-green-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          {% else %}
          <div
            class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-yellow-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          {% endif %}
        </div>
        <div class="ml-4">
          <div class="text-sm font-medium text-gray-500">Email Status</div>
          <div class="text-lg font-semibold">
            {% if email_verified %}
            <span class="text-green-600">Verified</span>
            {% else %}
            <span class="text-yellow-600">Pending</span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Subscription Status -->
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          {% if has_active_subscription %}
          <div
            class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-blue-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          {% else %}
          <div
            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-gray-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          {% endif %}
        </div>
        <div class="ml-4">
          <div class="text-sm font-medium text-gray-500">Subscription</div>
          <div class="text-lg font-semibold">
            {% if has_active_subscription %}
            <span class="text-blue-600">{{ subscription_status|title }}</span>
            {% else %}
            <span class="text-gray-600">No Plan</span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Billing Status -->
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          {% if has_stripe_customer %}
          <div
            class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-purple-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"
              ></path>
            </svg>
          </div>
          {% else %}
          <div
            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-gray-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"
              ></path>
            </svg>
          </div>
          {% endif %}
        </div>
        <div class="ml-4">
          <div class="text-sm font-medium text-gray-500">Billing</div>
          <div class="text-lg font-semibold">
            {% if has_stripe_customer %}
            <span class="text-purple-600">Active</span>
            {% else %}
            <span class="text-gray-600">Not Set Up</span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Customer Value -->
    <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <div
            class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"
          >
            <svg
              class="w-5 h-5 text-green-600"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"
              ></path>
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
        </div>
        <div class="ml-4">
          <div class="text-sm font-medium text-gray-500">Lifetime Value</div>
          <div class="text-lg font-semibold text-green-600">
            {% if customer and lifetime_value %} ${{
            lifetime_value|floatformat:2 }} {% else %} $0.00 {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions Section -->
  <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Quick Actions</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Email Verification Action -->
      {% if not email_verified %}
      <form
        method="post"
        action="{% url 'dashboard:quick_action' %}"
        class="inline"
      >
        {% csrf_token %}
        <input type="hidden" name="action" value="resend_verification" />
        <button
          type="submit"
          class="w-full bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg p-4 text-left transition-colors"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-yellow-600 mr-3"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
              ></path>
              <path
                d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
              ></path>
            </svg>
            <div>
              <div class="font-medium text-yellow-800">Verify Email</div>
              <div class="text-sm text-yellow-600">
                Resend verification email
              </div>
            </div>
          </div>
        </button>
      </form>
      {% endif %}

      <!-- Billing Setup Action -->
      {% if not has_stripe_customer %}
      <form
        method="post"
        action="{% url 'dashboard:quick_action' %}"
        class="inline"
      >
        {% csrf_token %}
        <input type="hidden" name="action" value="create_stripe_customer" />
        <button
          type="submit"
          class="w-full bg-purple-50 hover:bg-purple-100 border border-purple-200 rounded-lg p-4 text-left transition-colors"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-purple-600 mr-3"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9z"
              ></path>
            </svg>
            <div>
              <div class="font-medium text-purple-800">Setup Billing</div>
              <div class="text-sm text-purple-600">Create billing account</div>
            </div>
          </div>
        </button>
      </form>
      {% endif %}

      <!-- Subscription Management -->
      {% if has_customer_profile %}
      <a
        href="{% url 'customers:billing_portal' %}"
        class="w-full bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg p-4 text-left transition-colors block"
      >
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-blue-600 mr-3"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <div>
            <div class="font-medium text-blue-800">Manage Billing</div>
            <div class="text-sm text-blue-600">
              View invoices & payment methods
            </div>
          </div>
        </div>
      </a>
      {% endif %}

      <!-- Profile Management -->
      <a
        href="{% url 'profiles:detail' %}"
        class="w-full bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg p-4 text-left transition-colors block"
      >
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-gray-600 mr-3"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <div>
            <div class="font-medium text-gray-800">Edit Profile</div>
            <div class="text-sm text-gray-600">Update your information</div>
          </div>
        </div>
      </a>

      <!-- Support -->
      {% if has_customer_profile %}
      <a
        href="{% url 'customers:support_center' %}"
        class="w-full bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg p-4 text-left transition-colors block"
      >
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-green-600 mr-3"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0c0 .993-.241 1.929-.668 2.754l-1.524-1.525a3.997 3.997 0 00.078-2.183l1.562-1.562C15.802 8.249 16 9.1 16 10zm-5.165 3.913l1.58 1.58A5.98 5.98 0 0110 16a5.976 5.976 0 01-2.516-.552l1.562-1.562a4.006 4.006 0 001.789.027zm-4.677-2.796a4.002 4.002 0 01-.041-2.08l-.08.08-1.53-1.533A5.98 5.98 0 004 10c0 .954.223 1.856.619 2.657l1.539-1.54zm1.088-6.45A5.974 5.974 0 0110 4c.954 0 1.856.223 2.657.619l-1.54 1.539a4.002 4.002 0 00-2.346.033L7.246 4.668zM12 10a2 2 0 11-4 0 2 2 0 014 0z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <div>
            <div class="font-medium text-green-800">Get Support</div>
            <div class="text-sm text-green-600">Contact our support team</div>
          </div>
        </div>
      </a>
      {% endif %}

      <!-- Sync Customer Data -->
      {% if has_stripe_customer %}
      <form
        method="post"
        action="{% url 'dashboard:quick_action' %}"
        class="inline"
      >
        {% csrf_token %}
        <input type="hidden" name="action" value="sync_customer" />
        <button
          type="submit"
          class="w-full bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded-lg p-4 text-left transition-colors"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-indigo-600 mr-3"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                clip-rule="evenodd"
              ></path>
            </svg>
            <div>
              <div class="font-medium text-indigo-800">Sync Data</div>
              <div class="text-sm text-indigo-600">
                Update from billing system
              </div>
            </div>
          </div>
        </button>
      </form>
      {% endif %}
    </div>
  </div>

  <!-- Account Overview Section -->
  {% if has_customer_profile %}
  <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Account Overview</h2>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Account Information -->
      <div class="space-y-4">
        <h3 class="text-lg font-medium text-gray-800">Account Information</h3>
        <div class="bg-gray-50 rounded-lg p-4 space-y-3">
          <div class="flex justify-between">
            <span class="text-gray-600">Email:</span>
            <span class="font-medium">{{ user.email }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Customer Since:</span>
            <span class="font-medium">
              {% if customer_since %} {{ customer_since|date:"M d, Y" }} {% else
              %} {{ user.date_joined|date:"M d, Y" }} {% endif %}
            </span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Account Type:</span>
            <span class="font-medium">
              {% if has_active_subscription %} {{ subscription_status|title }}
              Member {% else %} Free Account {% endif %}
            </span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Email Status:</span>
            <span class="font-medium">
              {% if email_verified %}
              <span class="text-green-600">✓ Verified</span>
              {% else %}
              <span class="text-yellow-600">⚠ Pending</span>
              {% endif %}
            </span>
          </div>
        </div>
      </div>

      <!-- Subscription Details -->
      <div class="space-y-4">
        <h3 class="text-lg font-medium text-gray-800">Subscription Details</h3>
        <div class="bg-gray-50 rounded-lg p-4 space-y-3">
          {% if has_active_subscription %}
          <div class="flex justify-between">
            <span class="text-gray-600">Current Plan:</span>
            <span class="font-medium text-blue-600"
              >{{ subscription_status|title }}</span
            >
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Billing Status:</span>
            <span class="font-medium text-green-600">Active</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Lifetime Value:</span>
            <span class="font-medium text-green-600">
              ${{ lifetime_value|floatformat:2 }}
            </span>
          </div>
          {% else %}
          <div class="text-center py-4">
            <div class="text-gray-500 mb-2">No active subscription</div>
            <a
              href="{% url 'subscriptions:plans' %}"
              class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path
                  d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
                ></path>
              </svg>
              View Plans
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Recent Activity (Placeholder for future features) -->
  <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Recent Activity</h2>
    <div class="text-center py-8 text-gray-500">
      <svg
        class="w-12 h-12 mx-auto mb-4 text-gray-400"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          fill-rule="evenodd"
          d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"
          clip-rule="evenodd"
        ></path>
        <path
          fill-rule="evenodd"
          d="M4 5a2 2 0 012-2v1a2 2 0 00-2 2v6a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2v1a2 2 0 012-2H6a2 2 0 00-2 2z"
          clip-rule="evenodd"
        ></path>
      </svg>
      <p>No recent activity to display</p>
      <p class="text-sm mt-1">Your account activity will appear here</p>
    </div>
  </div>
</div>
{% endblock %}
<div class="grid grid-cols-2 gap-4 mb-4">
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
</div>
<div
  class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-96 mb-4"
></div>
<div class="grid grid-cols-2 gap-4">
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
  <div
    class="border-2 border-dashed rounded-lg border-gray-300 dark:border-gray-600 h-48 md:h-72"
  ></div>
</div>

{% endblock content %}
